Abstract

Este artigo apresenta um experimento de implementação e validação de um conjunto de instruções customizadas para a arquitetura RISC-V, com o objetivo de explorar o processo de extensão do conjunto de instruções (ISA) em um ambiente de simulação. O estudo foi conduzido no simulador gem5 e teve como foco compreender o comportamento de novas instruções projetadas para operações de multiplicação e acumulação matricial (MAC) em blocos 4×4. As instruções propostas, denominadas MXCLR, MXMAC e MXSTORE, foram integradas ao pipeline de execução do gem5 e validadas por meio de simulações no modo System Emulation (SE). Os resultados obtidos confirmam o funcionamento correto das instruções e demonstram a viabilidade da extensão do ISA RISC-V como ferramenta de apoio a pesquisas e ao ensino de arquitetura de computadores voltadas à aceleração de operações matriciais.

1. Introdução

Nas últimas décadas, o avanço das aplicações em inteligência artificial, criptografia e processamento digital de sinais tem impulsionado a busca por arquiteturas de hardware mais flexíveis, eficientes e adaptáveis. Nesse contexto, a arquitetura RISC-V tem se destacado por seu modelo aberto e modular, permitindo que pesquisadores e desenvolvedores criem e testem extensões personalizadas sem restrições de licenciamento. Essa característica a tornou uma das principais plataformas de ensino e pesquisa em arquitetura de computadores, favorecendo estudos experimentais sobre novas instruções, pipelines e aceleradores de hardware.

A possibilidade de estender o conjunto de instruções RISC-V (ISA) permite investigar, de forma prática, como instruções dedicadas podem influenciar o desempenho, a eficiência e a organização do pipeline. Essa capacidade é particularmente relevante para o desenvolvimento de soluções voltadas à computação de alto desempenho (HPC) e à aceleração de operações matriciais, fundamentais em redes neurais e processamento vetorial.

Este trabalho tem como objetivo explorar o processo de criação e integração de instruções customizadas no RISC-V, por meio da implementação de três novas operações denominadas MXCLR, MXMAC e MXSTORE. Essas instruções atuam em conjunto para limpar acumuladores, realizar multiplicações e somas entre blocos 4×4 e armazenar os resultados em memória, simulando um comportamento similar ao de extensões vetoriais. A validação foi conduzida no simulador gem5, escolhido por seu modelo microarquitetural detalhado, capaz de representar fielmente o comportamento do pipeline e das interações de memória. Os resultados obtidos demonstram o funcionamento esperado das instruções e evidenciam o potencial do gem5 e do RISC-V como ferramentas didáticas e de pesquisa para exploração de extensões ISA.

2. Fundamentação Teórica

A arquitetura RISC-V é baseada no paradigma Reduced Instruction Set Computer (RISC), caracterizado por um conjunto de instruções simples e de execução rápida. Diferente de arquiteturas proprietárias, o RISC-V é aberto, modular e extensível, permitindo a criação de instruções customizadas compatíveis com o ecossistema existente. Essa abertura tem estimulado pesquisas em áreas como aceleração de operações vetoriais, multiplicações matriciais e processamento de sinais. Cada instrução é definida por campos como opcode, funct3 e funct7, que determinam o tipo de operação e o formato dos operandos.

A adição de instruções especializadas tem sido explorada em diversos estudos voltados à otimização de desempenho em aplicações de inteligência artificial (IA), processamento digital de sinais (DSP) e computação de alto desempenho (HPC). Extensões específicas para operações de multiply-accumulate (MAC) e convoluções são frequentemente implementadas por meio de mecanismos como a RISC-V Vector Extension (RVV 1.0) ou de pipelines dedicados, demonstrando que o uso de instruções customizadas pode reduzir o número de ciclos por operação e simplificar a lógica de controle em software.

Para a avaliação e experimentação dessas modificações em nível microarquitetural, simuladores como o QEMU e o gem5 são amplamente empregados. O QEMU é voltado à emulação funcional e oferece alta velocidade de execução, porém com abstração limitada da microarquitetura. Já o gem5 disponibiliza um ambiente detalhado e modular, capaz de modelar caches, pipelines e unidades funcionais, sendo particularmente adequado para experimentos com extensões ISA. Além disso, as extensões vetoriais do RISC-V (RVV) introduzem mecanismos de processamento paralelo baseados em registradores vetoriais de largura variável. Embora o projeto atual não utilize diretamente o RVV, as instruções MX implementadas aproximam-se conceitualmente desse paradigma, ao executar manualmente um bloco de multiplicação-acumulação 4×4, servindo como prova de conceito para futuras extensões vetoriais customizadas.
